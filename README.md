# Android-Pentesting
A guide for setting up for android pentesting.

# prerequisites
Android Platform Tools (adb) 

https://developer.android.com/studio/releases/platform-tools

Geny motion emulator

https://www.genymotion.com/download/

Burpsuite

https://portswigger.net/burp/communitydownload

# Set Up
Download and install all the prerequisites

Trusted CAs for Android are stored in a special format in **/system/etc/security/cacerts** . If we have root privileges, it’s possible to write to this location and drop in the Burp CA (after some modification).

Export and convert the Burp CA The first step is to get the Burp CA in the right format. Using Burp Suite, export the CA Certificate in DER format. I saved it as **cacert.der**

Android wants the certificate to be in PEM format, and to have the filename equal to the subject_hash_old value appended with .0.

Note: if you are using OpenSSL <1.0, it’s actually just the subject_hash, not the “old” one

Use openssl to convert DER to PEM, then output the subject_hash_old and rename the file:

>**openssl x509 -inform DER -in cacert.der -out cacert.pem**

>**openssl x509 -inform PEM -subject_hash_old -in cacert.pem |head -1**

>**mv cacert.pem 9a5ba575.0**
  
Connect to adb

>**.\adb.exe connect 192.168.11.101:5555 (adb connect 192.168.11.101:5555)** 

Copy the certificate to the device We can use **adb** to copy the certificate over, but since it has to be copied to the **/system** filesystem, we have to remount it as writable. As root, this is easy with **adb remount**.
  
>**.\adb.exe root (adb root)**
  
>**.\adb.exe remount (adb remount)**
  
>**.\adb.exe push 9a5ba575.0 /sdcard/ (adb push 9a5ba575.0 /sdcard/)**

# Read-only error
If you encounter the below error do;
 >mv: /system/etc/security/cacerts/9a5ba575.0: Read-only file system
  
Simply remount as rw (Read/Write):

>**mount -o rw,remount /system**
  
Once you are done making changes, remount to ro (read-only):

>**mount -o ro,remount /system**
  
The just drop into a shell **(adb shell)** and move the file to **/system/etc/security/cacerts** and chmod it to 644:  
  
>**.\adb.exe shell (adb shell)**

>**mv /sdcard/9a5ba575.0 /system/etc/security/cacerts/**

>**chmod 644 /system/etc/security/cacerts/9a5ba575.0**
  
Lastly, we have to full reboot the device with either **adb reboot** or a power cycle.  
 
>**reboot**  

# Credits
credits goes to the following blog;
  >**https://blog.ropnop.com/configuring-burp-suite-with-android-nougat/**
